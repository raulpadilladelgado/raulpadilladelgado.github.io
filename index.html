<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Raúl Padilla</title>
    <link rel="stylesheet" href="main.css">
    <link rel="icon" href="images/yo.png" type="image/x-icon">
</head>
<body>
<header class="header">
    <div class="header-controls">
        <button id="langToggle" class="lang-toggle" aria-label="Cambiar idioma">ES/EN</button>
        <button id="themeToggle" class="theme-toggle" aria-label="Cambiar tema" aria-pressed="false">
            
            <svg class="icon icon-sun" viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" focusable="false">
                <circle cx="12" cy="12" r="4" fill="currentColor" />
                <g stroke="currentColor" stroke-width="2" stroke-linecap="round" fill="none">
                    <line x1="12" y1="1" x2="12" y2="3" />
                    <line x1="12" y1="21" x2="12" y2="23" />
                    <line x1="4.2" y1="4.2" x2="5.6" y2="5.6" />
                    <line x1="18.4" y1="18.4" x2="19.8" y2="19.8" />
                    <line x1="1" y1="12" x2="3" y2="12" />
                    <line x1="21" y1="12" x2="23" y2="12" />
                    <line x1="4.2" y1="19.8" x2="5.6" y2="18.4" />
                    <line x1="18.4" y1="5.6" x2="19.8" y2="4.2" />
                </g>
            </svg>
            
            <svg class="icon icon-moon" viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" focusable="false">
                <path fill="currentColor" d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/>
            </svg>
        </button>
    </div>
    <img src="images/yo.png" class="logo" alt="Foto de Raúl">
    <h1 class="title"><span class="initial">R</span>aúl <span class="initial">P</span>adilla</h1>
    <p class="subtitle" data-i18n="subtitle">Software Developer</p>
</header>

<main class="container card">

    <section class="links">
        <h2 data-i18n="projects">Proyectos</h2>
        <div class="link-icons projects">
            <div class="link-item" data-info="blog">
                <a class="link-link" href="https://raulpadilladelgado.github.io/blog/">
                    <img src="images/blog.png" class="icon" alt="">
                </a>
                <button class="info-toggle" aria-expanded="false" aria-label="Más info">
                    <svg class="info-icon" viewBox="0 0 14 14" width="14" height="14" aria-hidden="true" focusable="false">
                        <circle cx="7" cy="7" r="6" fill="none" stroke="currentColor" stroke-width="1" />
                        <line x1="7" y1="4" x2="7" y2="8" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" />
                        <circle cx="7" cy="10.5" r="0.6" fill="currentColor" />
                    </svg>
                </button>
                <div class="info-card" aria-hidden="true"></div>
            </div>

            <div class="link-item" data-info="github">
                <a class="link-link" href="https://github.com/raulpadilladelgado">
                    
                    <svg class="icon svg-icon" viewBox="0 0 24 24" width="52" height="52" aria-hidden="true" focusable="false">
                        <path fill="currentColor" d="M12 .5C5.73.5.5 5.73.5 12c0 5.08 3.29 9.38 7.86 10.9.57.1.78-.25.78-.55 0-.27-.01-1-.02-1.96-3.2.7-3.88-1.54-3.88-1.54-.52-1.32-1.27-1.67-1.27-1.67-1.04-.71.08-.7.08-.7 1.15.08 1.76 1.18 1.76 1.18 1.02 1.75 2.68 1.25 3.33.96.1-.74.4-1.25.73-1.54-2.55-.29-5.24-1.28-5.24-5.7 0-1.26.45-2.29 1.18-3.1-.12-.29-.51-1.45.11-3.02 0 0 .97-.31 3.18 1.18a11.04 11.04 0 012.9-.39c.98.01 1.97.13 2.9.39 2.2-1.5 3.17-1.18 3.17-1.18.62 1.57.24 2.73.12 3.02.74.81 1.18 1.84 1.18 3.1 0 4.43-2.69 5.4-5.26 5.68.41.35.78 1.04.78 2.1 0 1.52-.01 2.75-.01 3.13 0 .3.2.66.79.55C20.71 21.38 24 17.08 24 12 24 5.73 18.27.5 12 .5z"/>
                    </svg>
                </a>
                <button class="info-toggle" aria-expanded="false" aria-label="Más info">
                    <svg class="info-icon" viewBox="0 0 14 14" width="14" height="14" aria-hidden="true" focusable="false">
                        <circle cx="7" cy="7" r="6" fill="none" stroke="currentColor" stroke-width="1" />
                        <line x1="7" y1="4" x2="7" y2="8" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" />
                        <circle cx="7" cy="10.5" r="0.6" fill="currentColor" />
                    </svg>
                </button>
                <div class="info-card" aria-hidden="true"></div>
            </div>

            <div class="link-item" data-info="bot">
                <a class="link-link" href="https://t.me/botlinera_bot">
                    <img src="images/botlinera.png" class="icon" alt="">
                </a>
                <button class="info-toggle" aria-expanded="false" aria-label="Más info">
                    <svg class="info-icon" viewBox="0 0 14 14" width="14" height="14" aria-hidden="true" focusable="false">
                        <circle cx="7" cy="7" r="6" fill="none" stroke="currentColor" stroke-width="1" />
                        <line x1="7" y1="4" x2="7" y2="8" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" />
                        <circle cx="7" cy="10.5" r="0.6" fill="currentColor" />
                    </svg>
                </button>
                <div class="info-card" aria-hidden="true"></div>
            </div>

            <div class="link-item" data-info="actions">
                <a class="link-link" href="https://github.com/marketplace/actions/check-dependencies-in-pull-request">
                    <img src="images/github-actions.png" class="icon" alt="">
                </a>
                <button class="info-toggle" aria-expanded="false" aria-label="Más info">
                    <svg class="info-icon" viewBox="0 0 14 14" width="14" height="14" aria-hidden="true" focusable="false">
                        <circle cx="7" cy="7" r="6" fill="none" stroke="currentColor" stroke-width="1" />
                        <line x1="7" y1="4" x2="7" y2="8" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" />
                        <circle cx="7" cy="10.5" r="0.6" fill="currentColor" />
                    </svg>
                </button>
                <div class="info-card" aria-hidden="true"></div>
            </div>
        </div>

        <h2 data-i18n="contact">Contacto</h2>
        <div class="link-icons contact">
            <div class="link-item" data-info="email">
                <a class="link-link" href="mailto:padilladelgadoraul@gmail.com">
                    
                    <svg class="icon svg-icon" viewBox="0 0 24 24" width="52" height="52" aria-hidden="true" focusable="false">
                        <rect x="2.5" y="5.5" width="19" height="13" rx="2.2" ry="2.2" fill="none" stroke="currentColor" stroke-width="1.6"/>
                        <path d="M3.5 6.5l8 6 8-6" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </a>
                <button class="info-toggle" aria-expanded="false" aria-label="Más info">
                    <svg class="info-icon" viewBox="0 0 14 14" width="14" height="14" aria-hidden="true" focusable="false">
                        <circle cx="7" cy="7" r="6" fill="none" stroke="currentColor" stroke-width="1" />
                        <line x1="7" y1="4" x2="7" y2="8" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" />
                        <circle cx="7" cy="10.5" r="0.6" fill="currentColor" />
                    </svg>
                </button>
                <div class="info-card" aria-hidden="true"></div>
            </div>
            <div class="link-item" data-info="linkedin">
                <a class="link-link" href="https://www.linkedin.com/in/raulpadilladelgado/">
                    <img src="images/linkedin-icon.png" class="icon" alt="">
                </a>
                <button class="info-toggle" aria-expanded="false" aria-label="Más info">
                    <svg class="info-icon" viewBox="0 0 14 14" width="14" height="14" aria-hidden="true" focusable="false">
                        <circle cx="7" cy="7" r="6" fill="none" stroke="currentColor" stroke-width="1" />
                        <line x1="7" y1="4" x2="7" y2="8" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" />
                        <circle cx="7" cy="10.5" r="0.6" fill="currentColor" />
                    </svg>
                </button>
                <div class="info-card" aria-hidden="true"></div>
            </div>
        </div>
    </section>
</main>

<script>
document.addEventListener('DOMContentLoaded', function(){
    console.log('[init] DOMContentLoaded');
    const translations = {
        en: {
            subtitle: "Software Developer",
            projects: "Projects",
            contact: "Contact",
            social: "Social",
            blog: "Blog",
            github: "GitHub",
            rss: "RSS",
            email: "Email",
            linkedin: "LinkedIn"
            ,
            info: {
                blog: "Latest posts, technical notes and tutorials.",
                github: "Code repositories, contributions and sample projects.",
                bot: "Telegram bot I maintain: find nearest cheapest gas stations.",
                actions: "Automation examples and CI integrations I've published.",
                email: "Send me a message — I reply to collaboration and questions.",
                linkedin: "Professional profile and experiences."
            }
        },
        es: {
            subtitle: "Desarrollador de Software",
            projects: "Proyectos",
            contact: "Contacto",
            social: "Social",
            blog: "Blog",
            github: "GitHub",
            rss: "RSS",
            email: "Correo",
            linkedin: "LinkedIn"
            ,
            info: {
                blog: "Entradas recientes, apuntes técnicos y tutoriales.",
                github: "Repositorios de código, contribuciones y proyectos de ejemplo.",
                bot: "Bot de Telegram que mantengo: encuentra gasolineras baratas cercanas.",
                actions: "Ejemplos de automatización e integraciones CI que publiqué.",
                email: "Mándame un mensaje — contesto para colaboraciones y dudas.",
                linkedin: "Perfil profesional y experiencia."
            }
        }
    };

    let themeOverride = null;

    function systemPrefersDark(){
        return window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
    }

    function applyTheme(pref){
        let useDark;
        if(pref === 'dark') useDark = true;
        else if(pref === 'light') useDark = false;
        else useDark = systemPrefersDark();
        document.documentElement.classList.toggle('dark', useDark);
        updateThemeButton(useDark);
    }
    const themeToggle = document.getElementById('themeToggle');

    themeOverride = null;
    applyTheme(themeOverride);
    console.log('[init] theme applied (auto, no persistence)');

    const mq = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)');
    if(mq){
        mq.addEventListener && mq.addEventListener('change', ()=>{
            if(themeOverride === null) applyTheme(null);
        });
    }

    function updateThemeButton(isDark){
    const btn = themeToggle || document.getElementById('themeToggle');
    if(!btn) return;
    btn.setAttribute('aria-pressed', isDark ? 'true' : 'false');
    btn.classList.toggle('is-dark', isDark);
    }

    if(themeToggle){
        themeToggle.addEventListener('click', ()=>{
            const effectiveDark = document.documentElement.classList.contains('dark');
            themeOverride = effectiveDark ? 'light' : 'dark';
            themeToggle.classList.add('rotating');
            applyTheme(themeOverride);
            setTimeout(()=> themeToggle.classList.remove('rotating'), 420);
        });
    }

    function detectLang() {
        const nav = navigator.language || navigator.userLanguage || 'es';
        return nav.startsWith('en') ? 'en' : 'es';
    }

    function applyTranslations(lang){
        document.documentElement.lang = lang;
        document.querySelectorAll('[data-i18n]').forEach(el=>{
            const key = el.getAttribute('data-i18n');
            if(translations[lang] && translations[lang][key]) el.textContent = translations[lang][key];
        });
    }

    let currentLang = detectLang();
    applyTranslations(currentLang);

    const langToggle = document.getElementById('langToggle');
    if(langToggle){
        langToggle.addEventListener('click', ()=>{
            currentLang = currentLang === 'en' ? 'es' : 'en';
            applyTranslations(currentLang);
            langToggle.textContent = currentLang.toUpperCase();
            populateInfoCards();
        });
        langToggle.textContent = currentLang.toUpperCase();
    }
    console.log('[init] langToggle, themeToggle elements:', !!langToggle, !!themeToggle);

    function getInfoText(key){
        try{ return translations[currentLang].info[key] || ''; }catch(e){return ''}
    }

    function populateInfoCards(){
        document.querySelectorAll('.link-item').forEach(item=>{
            const key = item.getAttribute('data-info');
            const card = item.querySelector('.info-card');
            if(card){
                card.textContent = getInfoText(key) || '';
            }
        });
    }

    populateInfoCards();

    document.querySelectorAll('.link-item').forEach(item=>{
        const card = item.querySelector('.info-card');
        const toggle = item.querySelector('.info-toggle');
        item.addEventListener('mouseenter', ()=>{
            if(window.matchMedia && window.matchMedia('(hover: hover) and (pointer: fine)').matches){
                card.classList.add('visible'); card.setAttribute('aria-hidden','false');
            }
        });
        item.addEventListener('mouseleave', ()=>{
            if(window.matchMedia && window.matchMedia('(hover: hover) and (pointer: fine)').matches){
                card.classList.remove('visible'); card.setAttribute('aria-hidden','true');
            }
        });
        if(toggle){
            const closeAllInfoCards = ()=>{
                document.querySelectorAll('.link-item').forEach(otherItem=>{
                    const otherCard = otherItem.querySelector('.info-card');
                    const otherToggle = otherItem.querySelector('.info-toggle');
                    if(otherCard && otherCard.classList.contains('visible')){
                        otherCard.classList.remove('visible','sheet');
                        otherCard.setAttribute('aria-hidden','true');
                        if(otherToggle) otherToggle.setAttribute('aria-expanded','false');
                        const sc = otherCard.querySelector('.sheet-close'); if(sc) sc.remove();
                    }
                });
            };

            toggle.addEventListener('click', (e)=>{
                e.preventDefault(); e.stopPropagation();
                const expanded = toggle.getAttribute('aria-expanded') === 'true';
                if(!expanded){
                    closeAllInfoCards();
                    toggle.setAttribute('aria-expanded','true');
                    card.classList.add('visible');
                    card.setAttribute('aria-hidden','false');
                } else {
                    toggle.setAttribute('aria-expanded','false');
                    card.classList.remove('visible');
                    card.setAttribute('aria-hidden','true');
                }
            });

            document.addEventListener('click', (ev)=>{
                if(!ev.target.closest('.link-item')){
                    closeAllInfoCards();
                }
            });
        }
    });

    document.querySelectorAll('.info-card.sheet .sheet-close').forEach(n=>n.remove());
    document.querySelectorAll('.info-card.sheet').forEach(n=>n.classList.remove('sheet'));
});
</script>

</body>
</html>
